@import './soc-theme.css';

:root {
  /* --- SEMANTIC TOKENS (LIGHT REFINED) --- */
  --bg-background: #f3f4f6;       /* Fondo suave grisáceo */
  --bg-card: rgba(255, 255, 255, 0.95); /* Blanco con ligerísima opacidad */
  --bg-muted: #e5e7eb;            /* Áreas secundarias */
  --bg-input: #ffffff;
  --text-foreground: #111827;
  --text-muted-foreground: #4b5563;
  --border-border: rgba(0, 0, 0, 0.06); /* Bordes muy suaves */
  --primary: #3b82f6;
  --primary-muted: rgba(59, 130, 246, 0.1);
  --color-danger: #ef4444;
  --color-warning: #f59e0b;
  --color-success: #10b981;

  /* Glassmorphism Effect */
  --glass-bg: rgba(255, 255, 255, 0.7);
  --glass-blur: blur(8px);
  --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);

  /* Legacy mapping */
  --bg-app: var(--bg-background);
  --bg-surface: var(--bg-card);
  --bg-surface-muted: var(--bg-muted);
  --text-main: var(--text-foreground);
  --text-muted: var(--text-muted-foreground);
  --border-subtle: var(--border-border);
}

[data-theme='dark'] {
  --bg-background: #0f172a;       /* Slate 900: Fondo profundo pero azulado */
  --bg-card: #1e293b;             /* Slate 800: Tarjetas elevadas */
  --bg-muted: #334155;            /* Slate 700: Áreas de contraste sutil */
  --bg-input: #1e293b;            /* Fondo de inputs igual a la card */
  --text-foreground: #f8fafc;     /* Slate 50: Máxima legibilidad */
  --text-muted-foreground: #94a3b8; /* Slate 400: Texto secundario suave */
  --border-border: #334155;       /* Slate 700: Bordes visibles y elegantes */
  --primary: #3b82f6;             /* Azul vibrante */
  --primary-muted: rgba(59, 130, 246, 0.15);
  --color-danger: #f87171;
  --color-warning: #fbbf24;
  --color-success: #4ade80;
}

[data-theme='soc'] {
  --bg-background: #060b15;       /* Deep Space: Fondo tecnológico */
  --bg-card: #0d1425;             /* Navy Tech: Tarjeta elevada */
  --bg-muted: #161f35;            /* Navy Muted */
  --bg-input: #0d1425;
  --text-foreground: #e0f2fe;     /* Sky 100: Texto cian muy claro */
  --text-muted-foreground: #7dd3fc; /* Sky 300: Texto secundario cian */
  --border-border: rgba(56, 189, 248, 0.2); /* Bordes con brillo cian sutil */
  --primary: #38bdf8;             /* Cian SOC */
  --color-danger: #ff4b5c;
  --color-warning: #ff9f43;
  --color-success: #00ff00;
}

[data-theme='high-contrast'] {
  --bg-background: #0a0a0a;       /* Casi negro pero no puro */
  --bg-card: #1a1a1a;             /* Gris oscuro elevado */
  --bg-muted: #262626;
  --bg-input: #000000;
  --text-foreground: #ffffff;     /* Blanco puro */
  --text-muted-foreground: #d4d4d4;
  --border-border: #fbbf24;       /* Bordes Ámbar para máxima definición */
  --primary: #fbbf24;             /* Ámbar */
  --color-danger: #ff0000;
  --color-warning: #ffff00;
  --color-success: #00ff00;
}

/* --- GLOBAL RESET --- */
html, body {
  background-color: var(--bg-background) !important;
  color: var(--text-foreground) !important;
  transition: background-color 0.3s ease, color 0.3s ease;
  min-height: 100vh;
}

/* --- UTILITY CLASSES --- */
.text-foreground { color: var(--text-foreground) !important; }
.text-muted-foreground { color: var(--text-muted-foreground) !important; }
.text-primary { color: var(--primary) !important; }
.bg-background { background-color: var(--bg-background) !important; }
.bg-card { background-color: var(--bg-card) !important; }
.bg-surface { background-color: var(--bg-card) !important; }
.bg-surface-muted { background-color: var(--bg-muted) !important; }
.bg-muted { background-color: var(--bg-muted) !important; }
.border-border { border-color: var(--border-border) !important; }

.border {
  border-color: var(--border-border) !important;
}

hr {
  border-color: var(--border-border) !important;
  opacity: 0.2;
}

/* Legacy mappings */
.text-main { color: var(--text-foreground) !important; }
.text-muted { color: var(--text-muted-foreground) !important; }
.bg-surface-legacy { background-color: var(--bg-card) !important; }

/* Icons */
.lucide, svg { stroke: currentColor; }

/* --- COMPONENT STYLES --- */
.modal-content {
  background-color: var(--bg-card) !important;
  backdrop-filter: blur(12px);
  color: var(--text-foreground) !important;
  border: 1px solid var(--border-border) !important;
  border-radius: 20px !important;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15) !important;
}

/* Quill / Rich Text Editor FIX para Modos Oscuros */
.ql-toolbar.ql-snow {
  background-color: var(--bg-muted) !important;
  border-color: var(--border-border) !important;
  border-top-left-radius: 8px;
  border-top-right-radius: 8px;
}
.ql-container.ql-snow {
  background-color: var(--bg-input) !important;
  border-color: var(--border-border) !important;
  color: var(--text-foreground) !important;
  border-bottom-left-radius: 8px;
  border-bottom-right-radius: 8px;
}
.ql-snow .ql-stroke { stroke: var(--text-foreground) !important; }
.ql-snow .ql-fill { fill: var(--text-foreground) !important; }
.ql-snow .ql-picker { color: var(--text-foreground) !important; }
.ql-snow .ql-picker-options { 
  background-color: var(--bg-card) !important; 
  border-color: var(--border-border) !important; 
  color: var(--text-foreground) !important;
}

/* Wiki Fix */
.wiki-content {
  color: var(--text-foreground) !important;
}
.wiki-card {
  background-color: var(--bg-card) !important;
  border: 1px solid var(--border-border) !important;
}

/* Table Sorting Styles */
.sortable-header {
  cursor: pointer;
  user-select: none;
  transition: background-color 0.2s;
  position: relative;
}
.sortable-header:hover {
  background-color: var(--primary-muted) !important;
}
.sort-icon {
  margin-left: 5px;
  opacity: 0.5;
}
.sort-icon.active {
  opacity: 1;
  color: var(--primary);
}

.modal-body {
  background-color: var(--bg-card) !important;
}

.btn-close {
  filter: var(--theme-close-button-filter, none);
}

[data-theme='dark'] .btn-close,
[data-theme='soc'] .btn-close,
[data-theme='high-contrast'] .btn-close {
  filter: invert(1) grayscale(100%) brightness(200%);
}

.card {
  background-color: var(--bg-card) !important;
  backdrop-filter: var(--glass-blur);
  border: 1px solid var(--border-border) !important;
  color: var(--text-foreground) !important;
  border-radius: 16px !important;
  box-shadow: var(--card-shadow);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.card:hover {
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.08);
}

.table {
  --bs-table-bg: transparent !important;
  --bs-table-color: var(--text-foreground) !important;
  --bs-table-border-color: var(--border-border) !important;
}

.table thead tr { 
  background-color: var(--bg-muted) !important; 
}

.table thead th {
  color: var(--text-muted-foreground) !important;
  font-weight: 800 !important;
  text-transform: uppercase !important;
  font-size: 0.7rem !important;
  letter-spacing: 0.05em !important;
  border-bottom: 1px solid var(--border-border) !important;
  padding: 14px 16px !important;
}

.table tbody tr {
  background-color: var(--bg-card) !important;
}

.table-hover tbody tr:hover > * {
  background-color: var(--bg-muted) !important;
}

.form-control, .form-select {
  background-color: var(--bg-input) !important;
  color: var(--text-foreground);
  border: 1px solid var(--border-border) !important;
  border-radius: 8px !important;
  transition: all 0.2s ease;
}

.form-control::placeholder {
  color: var(--text-muted-foreground) !important;
  opacity: 0.8 !important; /* Más visible */
}

.form-control:focus, .form-select:focus {
  border-color: var(--primary) !important;
  box-shadow: 0 0 0 3px var(--primary-muted) !important;
  background-color: var(--bg-card) !important;
}

.input-group-text {
  background-color: var(--bg-muted) !important;
  color: var(--text-foreground) !important;
  border-color: var(--border-border) !important;
}

.form-check-input {
  background-color: var(--bg-input) !important;
  border-color: var(--border-border) !important;
}

.form-check-input:checked {
  background-color: var(--primary) !important;
  border-color: var(--primary) !important;
}

.form-check-label {
  color: var(--text-foreground) !important;
}

.form-switch .form-check-input {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='rgba(0,0,0,0.25)'/%3e%3c/svg%3e") !important;
}

[data-theme='dark'] .form-switch .form-check-input,
[data-theme='soc'] .form-switch .form-check-input,
[data-theme='high-contrast'] .form-switch .form-check-input {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='rgba(255,255,255,0.25)'/%3e%3c/svg%3e") !important;
}

.form-switch .form-check-input:checked {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%23fff'/%3e%3c/svg%3e") !important;
}

/* Accordion theme fix */
.accordion-item {
  background-color: var(--bg-card) !important;
  color: var(--text-foreground) !important;
  border-color: var(--border-border) !important;
}

.accordion-button {
  background-color: var(--bg-muted) !important;
  color: var(--text-foreground) !important;
}

.accordion-button:not(.collapsed) {
  background-color: var(--primary-muted) !important;
  color: var(--primary) !important;
}

.btn {
  border-radius: 8px !important;
  font-weight: 600 !important;
}

.btn-outline-secondary {
  color: var(--text-muted-foreground) !important;
  border-color: var(--border-border) !important;
  background-color: transparent !important;
}

.btn-outline-secondary:hover {
  background-color: var(--bg-muted) !important;
  border-color: var(--border-border) !important;
  color: var(--text-foreground) !important;
}

/* --- TICKET TABLE STYLES (ENTERPRISE) --- */
.ticket-table {
  background-color: transparent !important;
  border-collapse: separate !important;
  border-spacing: 0 !important;
}

.ticket-table thead th {
  font-size: 0.65rem !important;
  font-weight: 800 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.05em !important;
  color: var(--text-muted-foreground) !important;
  padding: 16px 12px !important;
  background-color: var(--bg-muted) !important;
  border-bottom: 1px solid var(--border-border) !important;
}

.ticket-row {
  cursor: pointer;
  transition: all 0.15s ease-in-out;
  background-color: var(--bg-card) !important;
  color: var(--text-foreground) !important;
}

.ticket-row td {
  border-bottom: 1px solid var(--border-border) !important;
  padding-top: 14px !important;
  padding-bottom: 14px !important;
  background-color: inherit !important;
}

.ticket-row:hover {
  background-color: var(--bg-muted) !important;
}

.ticket-id-cell {
  font-size: 0.75rem !important;
  color: var(--primary) !important;
  font-weight: 800 !important;
}

.ticket-title {
  font-weight: 600 !important;
  font-size: 0.9rem !important;
  color: var(--text-foreground) !important;
}

.ticket-group {
  font-size: 0.65rem !important;
  font-weight: 700 !important;
  text-transform: uppercase !important;
  color: var(--text-muted-foreground) !important;
}

.ticket-status-badge {
  font-size: 0.6rem !important;
  font-weight: 800 !important;
  letter-spacing: 0.05em !important;
  padding: 5px 10px !important;
  border-radius: 4px !important;
  border: 1px solid currentColor !important;
  display: inline-block;
}

.status-open { color: #dc2626 !important; background-color: rgba(220, 38, 38, 0.15) !important; }
.status-progress { color: #2563eb !important; background-color: rgba(37, 99, 235, 0.15) !important; }
.status-pending { color: #d97706 !important; background-color: rgba(217, 119, 6, 0.15) !important; }
.status-resolved, .status-operative { color: #16a34a !important; background-color: rgba(22, 163, 74, 0.2) !important; }
.status-maintenance { color: #2563eb !important; background-color: rgba(37, 99, 235, 0.15) !important; }
.status-tagging { color: #d97706 !important; background-color: rgba(217, 119, 6, 0.15) !important; }
.status-decommissioned { color: #dc2626 !important; background-color: rgba(220, 38, 38, 0.15) !important; }
.status-closed { color: var(--text-muted-foreground) !important; background-color: var(--bg-muted) !important; opacity: 0.8; }

.platform-pill {
  font-size: 0.6rem !important;
  font-weight: 800 !important;
  color: var(--text-muted-foreground) !important;
  background-color: var(--bg-muted) !important;
  padding: 4px 8px !important;
  border-radius: 4px !important;
  display: inline-block;
  border: 1px solid var(--border-border) !important;
}

.priority-indicator {
  padding: 5px 10px;
  border-radius: 6px;
  font-size: 0.65rem;
  font-weight: 800;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  min-width: 90px;
  justify-content: center;
  border: 1px solid transparent;
}

.priority-indicator .dot {
  width: 7px;
  height: 7px;
  border-radius: 50%;
}

.prio-critical { 
  background-color: rgba(220, 38, 38, 0.2); 
  color: #dc2626 !important;
  border-color: rgba(220, 38, 38, 0.3);
}
.prio-critical .dot { background-color: #dc2626; box-shadow: 0 0 8px #dc2626; }

.prio-high { 
  background-color: rgba(234, 88, 12, 0.2); 
  color: #ea580c !important;
  border-color: rgba(234, 88, 12, 0.3);
}
.prio-high .dot { background-color: #ea580c; }

.prio-medium { 
  background-color: rgba(202, 138, 4, 0.2); 
  color: #ca8a04 !important;
  border-color: rgba(202, 138, 4, 0.3);
}
.prio-medium .dot { background-color: #ca8a04; }

.prio-low { 
  background-color: rgba(22, 163, 74, 0.2); 
  color: #16a34a !important;
  border-color: rgba(22, 163, 74, 0.3);
}
.prio-low .dot { background-color: #16a34a; }

.ticket-date .date { color: var(--text-foreground) !important; font-size: 0.8rem; }
.ticket-date .time { color: var(--text-muted-foreground) !important; font-size: 0.75rem; font-weight: 500; }

.avatar-mini {
  width: 24px;
  height: 24px;
  background-color: var(--primary);
  color: white;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.7rem;
  font-weight: 800;
}

.pagination-container {
  background-color: var(--bg-card) !important;
  padding: 12px 20px !important;
  border-radius: 12px !important;
  display: flex !important;
  justify-content: space-between !important;
  align-items: center !important;
  border: 1px solid var(--border-border) !important;
}

::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: var(--bg-background); }
::-webkit-scrollbar-thumb { background: var(--border-border); border-radius: 10px; }
